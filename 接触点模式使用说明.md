# 接触点模式使用说明

## 功能概述
接触点模式是一个新的设计模式，用于显示参考平面与牙齿模型的接触点，并允许用户选择两个接触点自动生成平滑的路径曲线。

## 使用步骤

### 1. 加载模型和设置参考平面
1. 首先加载STL格式的牙齿模型文件
2. 在牙模上点击3个点来定义参考平面
3. 点击"确认平面"按钮确认参考平面设置

### 2. 进入接触点模式
1. 在"设计模式"下拉菜单中选择"接触点模式"
2. 系统会自动计算并显示参考平面与模型的接触点（绿色小球）
3. 状态栏会显示找到的接触点数量

### 3. 选择起点和终点
1. 点击任意一个接触点选择为起点（会变成橙色）
2. 点击另一个接触点选择为终点（也会变成橙色）
3. 选择两个点后，系统会自动生成平滑的路径曲线

### 4. 路径生成
- 系统会在两个选定点之间找到参考平面与模型接触面的短曲线
- 直接使用接触点作为路径点，确保路径在参考平面上
- 限制路径点数量在10个左右，避免过多点
- 生成的路径会替换现有的路径点
- 状态栏会显示生成的路径包含的点数

## 功能特点

- **自动接触点检测**：系统会自动找到参考平面与模型的所有接触点
- **智能聚类**：相近的接触点会被聚类，避免重复显示
- **可视化选择**：选中的接触点会改变颜色，便于识别
- **平滑路径生成**：使用先进的曲线算法生成平滑的路径
- **实时反馈**：状态栏提供实时的操作反馈

## 注意事项

- 接触点模式需要先设置好参考平面才能使用
- 只能选择两个接触点作为起点和终点
- 如果选择超过两个点，系统会清除之前的选择
- 生成的路径会替换现有的所有路径点
- 可以通过"清除全部"按钮清除所有内容重新开始

## 技术实现

- 使用Three.js进行3D渲染和交互
- 采用平面距离计算进行接触点检测
- 使用聚类算法优化接触点显示
- 按照在参考平面与模型交线上的实际位置对接触点进行排序
- 智能选择两点之间的短曲线路径
- 沿着曲线对路径点进行排序，确保路径沿着模型轮廓
- 直接使用接触点作为路径点，确保路径在参考平面上
- 限制路径点数量在10个左右，避免过多点
